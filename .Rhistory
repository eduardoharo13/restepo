library(curl)
library(flexdashboard)
library(readr)
library(raster)
library(ggplot2)
library(dplyr)
library(lubridate)
library(haven)
library(highcharter)
library(maptools)
library(RColorBrewer)
library(readxl)
library(leaflet)
library(broom)
library(dplyr)
library(ggplot2)
library(classInt)
library(sp)
library(rgdal)
library(spdep)
library(ggpubr)
library(rgeos)
#Cargamos la base de datos desde el repositorio
#Módulo 100
id<- "1lQ8L-mRVcR8nuiOwyaD25aCnod12GiB6"
sURL <- sprintf("https://drive.google.com/uc?id=%s&export=download",id)
con <- curl(sURL)
cap100<-read_sav(con)
#Módulo 200
cap200<-read_sav("D:/BD_varias/RENADEF 2017/200.sav")
# Provincias:
peru_prov<- readOGR("D:/GADM/gadm36_PER_2.shp")
getwd()
setwd("~/GitHub/restepo/GADM")
# Provincias:
peru_prov<- readOGR("gadm36_PER_2.shp")
qpal <- colorQuantile("Blues",cap100$FALTAS,n=9)
leaflet(peru_prov) %>%
addTiles() %>%
addPolygons(weight = 1,
stroke = T,
color = ~qpal(cap100$FALTAS),
#fillColor = ~qpal(NAME_2),
fillOpacity = 1,
smoothFactor = 0.2,
dashArray = "3",
label = ~NAME_2,
popup = ~paste("<b>Provincia:</b>", NAME_2,
"<br/>",
"<b>Departamento:</b>", NAME_1,
"<br/>",
"<b>Total de faltas:</b>",cap100$FALTAS,
"<br/>",
"<b>Faltas contra la persona:</b>",cap100$FALTAS_A,
"<br/>",
"<b>Faltas contra el patrimonio:</b>",cap100$FALTAS_B,
"<br/>",
"<b>Faltas contra las buenas costumbres:</b>",cap100$FALTAS_C,
"<br/>",
"<b>Faltas contra la seguridad pública:</b>",cap100$FALTAS_D
),
highlight = highlightOptions(
weight = 2,
dashArray = "",
color = "grey",
bringToFront = TRUE
))
id3<-"1Xivtt_zhexJZZmel1shb1K3DgW2g7xTk"
sURL3 <- sprintf("https://drive.google.com/uc?id=%s&export=download", id3)
con3 <- curl(sURL3)
cap300<-read_sav(con3)
# Distritos:
peru_distr <- readOGR("D:/GADM/gadm36_PER_3.shp")
setwd("~/GitHub/restepo")
# Distritos:
peru_distr <- readOGR("D:/GADM/gadm36_PER_3.shp")
#Módulo 200
cap200<-read_sav("D:/BD_varias/RENADEF 2017/200.sav")
# Provincias:
peru_prov<- readOGR("C:\Users\lucia\Documents\GitHub\restepo\GADM\gadm36_PER_2.shp")
# Provincias:
peru_prov<- readOGR("~\Documents\GitHub\restepo\GADM\gadm36_PER_2.shp")
